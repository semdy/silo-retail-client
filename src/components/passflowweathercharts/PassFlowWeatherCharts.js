import './PassFlowWeatherCharts.styl';

import React from 'react';
import BaseChart from '../../components/baseChart';
import store from  '../../app/store';
import {getStoreChartReport, getReportPayment} from '../../services/store';
import {getWeekNumber, localDate} from '../../utils/date';
import locale from '../../locale';

//格式化时间, 带上年份方便后续排序
const formatTime = (time, formatType) => {
  let ret = 0;
  let date = localDate(store.state.store.tzStamp, time * 1000);
  switch (formatType) {
    case 'hour':
      ret = date.getHours();
      break;
    case 'day':
      ret = date.getDate();
      break;
    case 'week':
      ret = getWeekNumber(date);
      break;
    case 'month':
      ret = date.getMonth() + 1;
      break;
    case 'quarter':
      ret = Math.ceil((date.getMonth() + 1) / 3);
      break;
    case 'year':
      ret = date.getFullYear();
      break;
    default:
  }

  return ret;
};

const UNIT_MAP = {
  hour: 'h',
  day: locale.day,
  week: locale.weekly,
  month: locale.month,
  quarter: locale.quarter,
  year: locale.year
};

const skyIconsMap = {
  "heavy-rain": {
    name: locale.HEAVY_RAIN, //"大雨"
    size: [22, 16],
    path: `M137.201,77.386c-2.406,0-4.357-1.957-4.357-4.371c0-23.712-19.232-43.003-42.875-43.003c-23.641,0-42.875,19.291-42.875,43.003c0.001,2.414-1.949,4.371-4.355,4.372c-2.407,0.001-4.359-1.955-4.36-4.369c0-0.001,0-0.002,0-0.003c0-28.532,23.144-51.745,51.591-51.745c28.447,0,51.59,23.212,51.59,51.745C141.56,75.429,139.608,77.386,137.201,77.386z\
      M157.598,141.041H41.78c-19.901,0-36.091-16.238-36.091-36.199c0-19.959,16.19-36.198,36.091-36.198c2.407,0,4.358,1.957,4.358,4.371s-1.951,4.371-4.358,4.371l0,0c-15.095,0-27.375,12.317-27.375,27.457c0,15.141,12.281,27.457,27.375,27.457h115.818c15.094,0,27.376-12.316,27.376-27.457c0-15.139-12.282-27.457-27.376-27.457c-2.407,0-4.358-1.957-4.358-4.371s1.951-4.371,4.358-4.371c19.899,0,36.091,16.239,36.091,36.198C193.688,124.803,177.497,141.041,157.598,141.041L157.598,141.041z\
      M157.598,77.386h-34.887c-2.407,0-4.358-1.957-4.358-4.371c0-2.414,1.951-4.371,4.358-4.371h34.887c2.406,0,4.357,1.957,4.357,4.371C161.955,75.429,160.004,77.386,157.598,77.386z M36.35,179.044c-2.406,0.002-4.359-1.954-4.36-4.368c-0.001-1.352,0.622-2.628,1.688-3.457l27.719-21.557c1.885-1.502,4.626-1.188,6.123,0.702c1.498,1.89,1.184,4.64-0.7,6.142c-0.027,0.021-0.055,0.043-0.082,0.064l-27.719,21.557C38.255,178.722,37.316,179.045,36.35,179.044z M76.815,179.044c-2.407,0.002-4.359-1.954-4.361-4.368c-0.001-1.352,0.622-2.628,1.688-3.457l27.718-21.557c1.886-1.502,4.626-1.188,6.124,0.702c1.497,1.89,1.184,4.64-0.7,6.142c-0.027,0.021-0.055,0.043-0.083,0.064l-27.719,21.557C78.72,178.722,77.781,179.045,76.815,179.044z M117.28,179.044c-2.405,0.002-4.358-1.954-4.36-4.368c0-1.352,0.623-2.628,1.688-3.457l27.718-21.557c1.886-1.502,4.625-1.188,6.123,0.702c1.497,1.89,1.184,4.64-0.699,6.142c-0.027,0.021-0.055,0.043-0.084,0.064l-27.719,21.557C119.187,178.722,118.248,179.045,117.28,179.044z`
  },
  "light-rain": {
    name: locale.LIGHT_RAIN, //小雨
    size: [22, 16],
    path:
      `M152.318,137.785H34.385c-17.113,0-31.033-13.924-31.033-31.033c0-17.036,13.794-30.903,30.799-31.033\
      c2.394-29.864,27.237-53.202,57.426-53.202c20.435,0,39.057,10.673,49.448,28.09c3.684-0.985,7.48-1.486,11.293-1.489\
      c24.44,0,44.328,19.888,44.328,44.333C196.646,117.893,176.76,137.785,152.318,137.785z M34.385,84.583\
      c-12.223,0-22.169,9.946-22.169,22.169c0,12.223,9.946,22.169,22.169,22.169h117.934c19.555,0,35.465-15.911,35.465-35.469\
      c0-19.559-15.91-35.469-35.465-35.469c-4.021,0-8.033,0.71-11.92,2.104l-3.662,1.315l-1.778-3.462\
      c-8.41-16.382-25.03-26.557-43.381-26.557c-26.891,0-48.77,21.878-48.77,48.77v5.137l-5.064-0.42\
      C36.64,84.704,35.532,84.583,34.385,84.583z\
      M63.159,156.3l-13.616,13.617c-1.73,1.73-1.73,4.536,0,6.267s4.537,1.73,6.267,0l13.616-13.617\
      c1.731-1.73,1.731-4.535,0-6.267C67.695,154.569,64.89,154.569,63.159,156.3z M131.941,156.3c-1.73-1.73-4.535-1.731-6.266-0.002\
      c0,0.001-0.001,0.001-0.002,0.002l-13.615,13.617c-1.73,1.73-1.73,4.536,0,6.267s4.535,1.73,6.267,0l13.616-13.617\
      c1.73-1.729,1.732-4.532,0.003-6.264C131.943,156.303,131.941,156.301,131.941,156.3z`
  },
  "sleet": {
    name: locale.SLEET, //"雨夹雪"
    size: [22, 16],
    path: `M45.913,147.693l-12.82,12.619c-1.629,1.603-1.63,4.199-0.002,5.805c0.783,0.771,1.846,1.205,2.954,1.203\
      c1.067,0,2.135-0.4,2.95-1.202l12.82-12.616c1.63-1.604,1.63-4.202,0.001-5.807c0,0-0.001,0-0.001-0.002\
      c-1.629-1.603-4.271-1.603-5.9,0C45.914,147.693,45.914,147.693,45.913,147.693z M155.322,147.693c-1.629-1.603-4.271-1.603-5.9,0\
      c0,0,0,0-0.001,0L136.6,160.313c-1.629,1.604-1.629,4.201-0.002,5.806c0.782,0.771,1.846,1.204,2.953,1.202\
      c1.068,0,2.135-0.399,2.951-1.201l12.82-12.616c1.63-1.604,1.631-4.2,0.002-5.806C155.324,147.695,155.322,147.695,155.322,147.693\
      z M148.581,130.539H37.539c-16.115,0-29.221-12.896-29.221-28.753c0-15.78,12.983-28.633,29.001-28.753\
      c2.25-27.671,25.642-49.294,54.071-49.294c19.236,0,36.774,9.889,46.555,26.03c3.47-0.916,7.045-1.38,10.636-1.383\
      c23.007,0,41.737,18.43,41.737,41.081C190.318,112.115,171.59,130.539,148.581,130.539L148.581,130.539z M37.539,81.246\
      c-11.511,0-20.875,9.216-20.875,20.541c0,11.33,9.364,20.54,20.875,20.54h111.042c18.412,0,33.392-14.742,33.392-32.86\
      c0-18.122-14.979-32.868-33.392-32.868c-3.788,0-7.563,0.658-11.222,1.949l-3.449,1.219l-1.678-3.208\
      c-7.914-15.175-23.563-24.607-40.843-24.607c-25.324,0-45.92,20.276-45.92,45.188v4.764l-4.768-0.393\
      C39.659,81.359,38.616,81.246,37.539,81.246z M69.796,163.531c-1.365,0.003-2.473-1.084-2.476-2.428\
      c-0.001-0.867,0.467-1.672,1.23-2.108l14.96-8.565c1.179-0.675,2.691-0.283,3.377,0.877c0.001,0.002,0.002,0.004,0.003,0.008\
      c0.687,1.158,0.287,2.646-0.892,3.32c-0.001,0-0.001,0.002-0.002,0.002l-14.958,8.567\
      C70.661,163.419,70.232,163.531,69.796,163.531z\
      M84.828,163.271c-0.399,0-0.807-0.096-1.181-0.299l-15.261-8.209c-1.204-0.648-1.65-2.141-0.997-3.332\
      c0-0.002,0.001-0.002,0.001-0.004c0.655-1.189,2.158-1.632,3.362-0.988l15.26,8.211c1.204,0.649,1.647,2.146,0.99,3.34\
      C86.568,162.779,85.735,163.271,84.828,163.271z\
      M77.195,167.738h-0.002c-1.37,0-2.479-1.158-2.479-2.516l0.011-16.914c0-1.354,1.108-2.451,2.474-2.451\
      c0.002,0,0.003,0,0.005,0h0.002c1.37,0,2.479,1.07,2.479,2.424l-0.011,16.959C79.673,166.602,78.564,167.738,77.195,167.738z\
      M100.891,163.492c-1.371-0.002-2.479-1.104-2.479-2.463c0.001-0.873,0.469-1.68,1.229-2.12l15.007-8.656\
      c1.183-0.681,2.699-0.286,3.387,0.888c0.002,0.002,0.003,0.002,0.004,0.006c0.688,1.172,0.287,2.676-0.896,3.356\
      c0,0-0.002,0.001-0.002,0.002l-15.004,8.655C101.758,163.378,101.329,163.493,100.891,163.492z\
      M116.02,163.271c-0.396,0-0.806-0.096-1.181-0.299l-15.26-8.209c-1.204-0.648-1.65-2.141-0.997-3.332\
      c0-0.002,0.001-0.002,0.001-0.004c0.655-1.189,2.158-1.632,3.362-0.988l15.262,8.211c1.204,0.649,1.646,2.146,0.99,3.34\
      C117.764,162.779,116.93,163.271,116.02,163.271z\
      M108.391,167.738h-0.004c-1.369,0-2.479-1.158-2.479-2.516l0.011-16.914c0-1.354,1.107-2.451,2.475-2.451\
      c0.002,0,0.004,0,0.006,0h0.002c1.369,0,2.479,1.07,2.479,2.424l-0.011,16.959C110.869,166.602,109.758,167.738,108.391,167.738z`
  },
  cloudy: {
    name: locale.CLOUDY, //"多云"
    size: [22, 16],
    path: `M163.39,148.646H98.599c-15.775,0-28.609-12.802-28.609-28.536c0-15.633,12.666-28.37,28.3-28.536c0.167-17.847,14.773-32.315,32.704-32.315s32.538,14.468,32.706,32.315c15.634,0.166,28.3,12.903,28.3,28.536C192,135.845,179.165,148.646,163.39,148.646L163.39,148.646z M98.599,98.382c-12.01,0-21.784,9.747-21.784,21.729s9.773,21.728,21.784,21.728h64.791c12.013,0,21.784-9.746,21.784-21.728s-9.771-21.729-21.784-21.729h-3.101c-1.886,0-3.414-1.524-3.414-3.405v-3.093c0-14.235-11.609-25.815-25.879-25.815c-14.271,0-25.881,11.58-25.881,25.815v3.093c0,1.881-1.528,3.405-3.413,3.405H98.599L98.599,98.382z\
      M49.224,65.382c12.614-15.221,35.288-17.354,50.541-4.754c2.214,1.829,2.688,3.903,0.855,6.113c-1.831,2.209-5.246,0.385-7.461-1.444c-10.832-8.949-29.486-6.32-38.446,4.489c-8.958,10.811-8.169,30.339,3.368,39.168c2.281,1.745,4.158,4.525,2.327,6.735c-0.812,0.979-0.984,1.051-2.146,1.263c-1.46,0.267-3.024-0.089-4.258-1.107C38.752,103.243,36.608,80.606,49.224,65.382L49.224,65.382z\
      M49.819,64.757\
      M44.075,60.057c-0.576,0.453-1.212,0.993-2.399,1.04c-1.482,0.06-2.58-0.593-3.813-1.611L25.468,49.271c-2.214-1.83-3.419-4.27-1.583-6.307c1.514-1.681,3.73-1.716,5.945,0.113l12.899,10.659c2.214,1.83,3.026,3.78,1.568,6.068L44.075,60.057z\
      M69.905,46.978c-0.729-0.084-1.562-0.152-2.435-0.954c-1.092-1.003-1.405-2.238-1.557-3.828l-1.536-15.964c-0.271-2.855,0.604-5.431,3.346-5.58c2.263-0.122,3.855,1.415,4.127,4.27l1.58,16.634c0.271,2.855-0.536,4.808-3.189,5.4L69.905,46.978z\
      M98.857,55.71c-0.461-0.569-1.009-1.198-1.071-2.38c-0.077-1.479,0.566-2.58,1.572-3.822l10.099-12.479c1.809-2.229,4.24-3.459,6.304-1.652c1.703,1.492,1.764,3.701-0.046,5.931l-10.537,12.989c-1.809,2.229-3.755,3.062-6.066,1.633L98.857,55.71z\
      M34.373,90.082c-0.076,0.727-0.133,1.559-0.926,2.44c-0.992,1.101-2.226,1.429-3.818,1.6L13.645,95.85c-2.859,0.305-5.453-0.536-5.635-3.269c-0.15-2.255,1.371-3.862,4.23-4.169l16.655-1.78c2.859-0.306,4.827,0.475,5.452,3.114L34.373,90.082z\
      M49.091,116.465c0.443,0.584,0.972,1.229,0.996,2.413c0.031,1.48-0.646,2.561-1.69,3.771L37.916,134.81c-1.877,2.172-4.347,3.326-6.353,1.457c-1.656-1.544-1.647-3.755,0.23-5.928l10.936-12.655c1.877-2.173,3.848-2.944,6.114-1.445L49.091,116.465z`
  },
  overcast: {
    name: locale.OVERCAST, //"阴天"
    size: [22, 16],
    path: `M149.263,154.4H38.221C22.105,154.4,9,141.504,9,125.647C9,109.867,21.982,97.014,38,96.895\
    C40.25,69.223,63.643,47.6,92.072,47.6c19.236,0,36.774,9.889,46.555,26.03c3.47-0.916,7.045-1.38,10.636-1.383\
    c23.007,0,41.737,18.43,41.737,41.081C191,135.977,172.271,154.4,149.263,154.4L149.263,154.4z M38.221,105.107\
    c-11.511,0-20.875,9.216-20.875,20.541c0,11.33,9.364,20.54,20.875,20.54h111.042c18.412,0,33.392-14.742,33.392-32.86\
    c0-18.121-14.979-32.867-33.392-32.867c-3.788,0-7.563,0.657-11.222,1.948l-3.449,1.22l-1.678-3.209\
    C125,65.246,109.351,55.813,92.071,55.813c-25.324,0-45.92,20.276-45.92,45.188v4.764l-4.768-0.393\
    C40.341,105.221,39.298,105.107,38.221,105.107z`
  },
  sunny: {
    name: "晴天",
    size: 22,
    path: `M52.677,141.461L35.087,159.05c-1.675,1.675-1.675,4.188,0,5.862c1.675,1.676,4.188,1.676,5.863,0l17.589-17.588c1.675-1.676,1.675-4.188,0-5.863C56.864,139.785,54.352,139.785,52.677,141.461L52.677,141.461z M41.369,100c0-2.513-1.675-4.188-4.188-4.188H12.054c-2.513,0-4.188,1.675-4.188,4.188c0,2.513,1.675,4.188,4.188,4.188h25.127C39.694,104.188,41.369,102.514,41.369,100L41.369,100z M147.322,58.541l17.59-17.589c1.674-1.675,1.674-4.188,0-5.863c-1.676-1.675-4.188-1.675-5.863,0l-17.59,17.589c-1.675,1.675-1.675,4.188,0,5.863C143.135,60.216,145.647,60.216,147.322,58.541L147.322,58.541z M100,41.37c2.512,0,4.188-1.675,4.188-4.188V12.055c0-2.513-1.676-4.188-4.188-4.188c-2.513,0-4.188,1.675-4.188,4.188v25.127C95.812,39.695,97.487,41.37,100,41.37L100,41.37zM52.677,58.541c1.675,1.675,4.188,1.675,5.863,0s1.675-4.188,0-5.863L40.95,34.669c-1.675-1.675-4.188-1.675-5.863,0c-1.675,1.675-1.675,4.188,0,5.863L52.677,58.541L52.677,58.541z M187.945,95.813h-25.127c-2.514,0-4.188,1.675-4.188,4.188c0,2.513,1.675,4.188,4.188,4.188h25.127c2.513,0,4.188-1.675,4.188-4.188C192.133,97.488,190.458,95.813,187.945,95.813L187.945,95.813z M147.322,141.461c-1.675-1.676-4.188-1.676-5.863,0c-1.675,1.675-1.675,4.188,0,5.863l17.59,17.588c1.675,1.676,4.188,1.676,5.863,0c1.674-1.675,1.674-4.188,0-5.862L147.322,141.461L147.322,141.461z M100,49.746c-27.64,0-50.254,22.614-50.254,50.254S72.359,150.256,100,150.256s50.254-22.615,50.254-50.255S127.64,49.746,100,49.746L100,49.746z M100,141.879c-23.033,0-41.879-18.846-41.879-41.878c0-23.033,18.846-41.879,41.879-41.879c23.034,0,41.879,18.846,41.879,41.879C141.879,123.033,123.033,141.879,100,141.879L100,141.879z M100,158.631c-2.513,0-4.188,1.675-4.188,4.188v25.127c0,2.514,1.675,4.188,4.188,4.188c2.512,0,4.188-1.675,4.188-4.188v-25.127C104.188,160.306,102.512,158.631,100,158.631L100,158.631z`
  },
  sunset: {
    name: locale.SUNSET, //"日落"
    size: 22,
    path: `M100,45.121c2.509,0,4.182-1.673,4.182-4.182V15.848c0-2.509-1.673-4.182-4.182-4.182c-2.509,0-4.182,1.673-4.182,4.182v25.091C95.818,43.448,97.491,45.121,100,45.121z\
      M125.091,154.213h-8.364v-20.91c0-2.509-1.672-4.181-4.181-4.181H87.455c-2.509,0-4.182,1.672-4.182,4.181v20.91h-8.363c-2.509,0-4.182,1.672-4.182,4.181c0,1.255,0.418,2.092,1.254,2.927l25.091,25.091c0.836,0.837,1.673,1.255,2.928,1.255c1.255,0,2.092-0.418,2.927-1.255l25.091-25.091c0.837-0.835,1.255-1.672,1.255-2.927C129.272,155.885,127.6,154.213,125.091,154.213z\
      M100,179.637l-17.062-17.062h2.509c2.509,0,4.182-1.672,4.182-4.182v-22.917h20.742v22.917c0,2.51,1.673,4.182,4.182,4.182h2.509L100,179.637z\
      M147.255,62.267l17.564-17.564c1.672-1.673,1.672-4.182,0-5.854c-1.675-1.673-4.184-1.673-5.855,0L141.4,56.412c-1.673,1.673-1.673,4.182,0,5.854C143.072,63.938,145.581,63.939,147.255,62.267z\
      M187.818,103.666h-37.637c0-27.6-22.582-50.182-50.182-50.182c-27.6,0-50.182,22.582-50.182,50.182H12.182c-2.509,0-4.182,1.673-4.182,4.182s1.673,4.184,4.182,4.184h175.637c2.509,0,4.182-1.675,4.182-4.184S190.327,103.666,187.818,103.666z\
      M58.182,103.666c0-23,18.818-41.818,41.818-41.818c22.999,0,41.817,18.818,41.817,41.818H58.182z\
      M52.746,62.267c1.673,1.673,4.182,1.673,5.854,0c1.672-1.673,1.673-4.182,0-5.854L41.036,38.43c-1.673-1.673-4.182-1.673-5.854,0c-1.673,1.673-1.673,4.182,0,5.854L52.746,62.267z`
  },
  sunrise: {
    name: locale.SUNRISE, //"日出"
    size: [18, 22],
    path: `M74.909,46.622h8.364v20.683c0,2.482,1.672,4.136,4.181,4.136h25.091c2.51,0,4.182-1.654,4.182-4.136V46.622h8.363c2.51,0,4.184-1.654,4.184-4.136c0-1.241-0.42-2.069-1.256-2.895l-25.091-24.819c-0.836-0.828-1.673-1.241-2.927-1.241c-1.255,0-2.092,0.414-2.927,1.241l-25.091,24.82c-0.837,0.826-1.255,1.654-1.255,2.895C70.727,44.968,72.4,46.622,74.909,46.622z\
      M100,21.474l17.063,16.877h-2.511c-2.509,0-4.182,1.654-4.182,4.137v22.668H89.628V42.486c0-2.482-1.673-4.137-4.182-4.137h-2.509L100,21.474z\
      M100,117.348c2.509,0,4.182-1.655,4.182-4.137V88.393c0-2.482-1.673-4.137-4.182-4.137s-4.182,1.655-4.182,4.137v24.818C95.818,115.692,97.491,117.348,100,117.348z\
      M147.255,134.308l17.563-17.372c1.673-1.657,1.673-4.138,0-5.791c-1.674-1.654-4.184-1.654-5.854,0L141.4,128.516c-1.674,1.656-1.674,4.137,0,5.79C143.072,135.96,145.581,135.962,147.255,134.308z\
      M187.818,175.257h-37.637c0-27.3-22.582-49.637-50.183-49.637c-27.6,0-50.182,22.337-50.182,49.637H12.182c-2.509,0-4.182,1.654-4.182,4.137s1.673,4.138,4.182,4.138h175.636c2.51,0,4.183-1.655,4.183-4.138S190.327,175.257,187.818,175.257z\
      M58.182,175.257c0-22.75,18.818-41.364,41.818-41.364c22.999,0,41.816,18.614,41.816,41.364H58.182z\
      M52.746,134.308c1.673,1.654,4.182,1.654,5.854,0c1.672-1.655,1.673-4.138,0-5.791l-17.564-17.788c-1.673-1.654-4.182-1.654-5.854,0c-1.673,1.656-1.673,4.139,0,5.791L52.746,134.308z`
  },
  "heavy-snow": {
    name: locale.HEAVY_SNOW, //"大雪"
    size: [22, 16],
    path: `M152.318,135.785H34.385c-17.113,0-31.033-13.924-31.033-31.033c0-17.036,13.794-30.903,30.799-31.033c2.394-29.864,27.237-53.202,57.426-53.202c20.435,0,39.057,10.673,49.448,28.09c3.684-0.985,7.48-1.486,11.293-1.489c24.44,0,44.328,19.888,44.328,44.333C196.646,115.893,176.76,135.785,152.318,135.785z M34.385,82.583c-12.223,0-22.169,9.946-22.169,22.169c0,12.223,9.946,22.169,22.169,22.169h117.934c19.555,0,35.465-15.911,35.465-35.469c0-19.559-15.91-35.469-35.465-35.469c-4.021,0-8.033,0.71-11.92,2.104l-3.662,1.315l-1.778-3.462c-8.41-16.382-25.03-26.557-43.381-26.557c-26.891,0-48.77,21.878-48.77,48.77v5.137l-5.064-0.42C36.64,82.704,35.532,82.583,34.385,82.583z\
      M57.891,171.492c-1.371-0.001-2.48-1.103-2.479-2.462c0.001-0.873,0.469-1.681,1.229-2.121l15.007-8.656c1.183-0.681,2.699-0.286,3.387,0.887c0.002,0.002,0.003,0.003,0.004,0.006c0.688,1.173,0.287,2.676-0.896,3.357c-0.001,0-0.002,0.001-0.002,0.002l-15.004,8.655C58.758,171.378,58.329,171.493,57.891,171.492z\
      M73.02,171.272c-0.397,0-0.806-0.096-1.181-0.3l-15.26-8.209c-1.204-0.647-1.65-2.14-0.997-3.331c0-0.002,0.001-0.002,0.001-0.004c0.655-1.19,2.158-1.632,3.363-0.988l15.261,8.21c1.204,0.65,1.647,2.146,0.99,3.34C74.763,170.78,73.929,171.271,73.02,171.272z\
      M65.39,175.739h-0.003c-1.37,0-2.48-1.159-2.48-2.517l0.011-16.913c0-1.354,1.108-2.451,2.475-2.451c0.002,0,0.004,0,0.006,0h0.002c1.368,0,2.479,1.069,2.479,2.423l-0.011,16.96C67.869,174.601,66.758,175.739,65.39,175.739z\
      M92.499,171.492c-1.371-0.001-2.48-1.103-2.479-2.462c0.001-0.873,0.469-1.681,1.229-2.121l15.007-8.656c1.184-0.681,2.699-0.286,3.387,0.887c0.002,0.002,0.004,0.003,0.004,0.006c0.688,1.173,0.287,2.676-0.895,3.357c-0.002,0-0.002,0.001-0.002,0.002l-15.005,8.655C93.366,171.378,92.937,171.493,92.499,171.492z\
      M107.627,171.272c-0.396,0-0.805-0.096-1.18-0.3l-15.26-8.209c-1.204-0.647-1.65-2.14-0.997-3.331c0-0.002,0.001-0.002,0.001-0.004c0.655-1.19,2.158-1.632,3.363-0.988l15.26,8.21c1.205,0.65,1.648,2.146,0.99,3.34C109.371,170.78,108.537,171.271,107.627,171.272z\
      M99.998,175.739h-0.003c-1.37,0-2.48-1.159-2.48-2.517l0.011-16.913c0-1.354,1.108-2.451,2.475-2.451c0.002,0,0.004,0,0.006,0h0.002c1.368,0,2.479,1.069,2.479,2.423l-0.012,16.96C102.477,174.601,101.365,175.739,99.998,175.739z\
      M125.877,171.492c-1.37-0.001-2.48-1.103-2.479-2.462c0-0.873,0.469-1.681,1.229-2.121l15.008-8.656c1.183-0.681,2.699-0.286,3.387,0.887c0.002,0.002,0.003,0.003,0.004,0.006c0.688,1.173,0.287,2.676-0.896,3.357c-0.001,0-0.002,0.001-0.002,0.002l-15.005,8.655C126.744,171.378,126.314,171.493,125.877,171.492z\
      M141.006,171.272c-0.397,0-0.806-0.096-1.181-0.3l-15.26-8.209c-1.204-0.647-1.649-2.14-0.997-3.331c0-0.002,0.001-0.002,0.002-0.004c0.654-1.19,2.158-1.632,3.362-0.988l15.261,8.21c1.204,0.65,1.647,2.146,0.99,3.34C142.749,170.78,141.915,171.271,141.006,171.272z\
      M133.376,175.739h-0.003c-1.37,0-2.48-1.159-2.48-2.517l0.011-16.913c0-1.354,1.108-2.451,2.475-2.451c0.002,0,0.004,0,0.006,0h0.002c1.368,0,2.479,1.069,2.479,2.423l-0.011,16.96C135.855,174.601,134.744,175.739,133.376,175.739z`
  },
  thunder: {
    name: locale.THUNDER, //"雷电"
    size: [22, 16],
    path: `M149.262,129.002H38.219c-16.113,0-29.22-13.046-29.22-29.076c0-15.962,12.988-28.955,29-29.076\
      c2.254-27.981,25.646-49.848,54.071-49.848c19.24,0,36.774,10,46.559,26.319c3.469-0.923,7.042-1.392,10.634-1.395\
      c23.011,0,41.737,18.633,41.737,41.538C190.999,110.364,172.274,129.002,149.262,129.002z M38.219,79.155\
      c-11.508,0-20.874,9.318-20.874,20.771c0,11.451,9.366,20.771,20.874,20.771h111.043c18.413,0,33.393-14.907,33.393-33.232\
      c0-18.326-14.979-33.233-33.393-33.233c-3.786,0-7.563,0.665-11.225,1.971l-3.448,1.232l-1.673-3.243\
      c-7.919-15.349-23.566-24.883-40.846-24.883c-25.32,0-45.92,20.499-45.92,45.695v4.813l-4.768-0.394\
      C40.342,79.268,39.299,79.155,38.219,79.155z\
      M104.937,137.5l-1.659,9.66h9.222l-20.075,32.539l3.779-25.687l-6.704,0.005l3.136-16.518`
  },
  fog: {
    name: locale.FOG, //"雾"
    size: [22, 18],
    path: `M148.581,127.539H37.539c-16.115,0-29.221-12.896-29.221-28.753c0-15.78,12.983-28.633,29.001-28.753\
      c2.25-27.671,25.642-49.294,54.071-49.294c19.236,0,36.774,9.889,46.555,26.03c3.47-0.916,7.045-1.38,10.636-1.383\
      c23.007,0,41.737,18.43,41.737,41.081C190.318,109.115,171.59,127.539,148.581,127.539L148.581,127.539z M37.539,78.246\
      c-11.511,0-20.875,9.216-20.875,20.541c0,11.33,9.364,20.54,20.875,20.54h111.042c18.412,0,33.392-14.742,33.392-32.86\
      c0-18.122-14.979-32.868-33.392-32.868c-3.788,0-7.563,0.658-11.222,1.949l-3.449,1.219l-1.678-3.208\
      c-7.914-15.175-23.563-24.607-40.843-24.607c-25.324,0-45.92,20.276-45.92,45.188v4.764l-4.768-0.393\
      C39.659,78.359,38.616,78.246,37.539,78.246z\
      M148.52,177.546h-0.004l-28.811-0.011c-2.82-0.002-5.109-1.286-5.107-4.106\
      c0.002-2.822,2.291-4.104,5.111-4.104h0.002l28.811,0.018c2.819-0.003,5.106,1.281,5.108,4.1c0,0.002,0,0.003,0,0.005\
      c-0.002,2.818-2.288,4.101-5.106,4.099C148.521,177.546,148.521,177.546,148.52,177.546L148.52,177.546z\
      M99.777,177.546h-0.002l-50.806-0.011c-2.821,0.001-5.108-1.284-5.109-4.104c0-0.002,0-0.002,0-0.002\
      c0.002-2.82,2.29-4.104,5.109-4.104h0.004l50.807,0.018c2.817-0.003,5.104,1.279,5.106,4.098c0,0.002,0,0.005,0,0.007\
      c0,2.816-2.284,4.1-5.101,4.099C99.783,177.546,99.781,177.546,99.777,177.546z\
      M160.4,156.082h-0.002l-66.202-0.012c-2.819-0.001-5.104-1.286-5.103-4.106\
      c0-2.818,2.286-4.104,5.105-4.103H94.2l66.202,0.017c2.818,0,5.102,1.285,5.102,4.104\
      C165.504,154.799,163.219,156.083,160.4,156.082L160.4,156.082z\
      M75.056,156.082h-0.004l-36.561-0.012c-2.819,0.038-5.136-1.216-5.175-4.034\
      c-0.039-2.82,2.215-4.137,5.035-4.176c0.048,0,0.095,0,0.143,0.001h0.002l36.562,0.017c2.818,0,5.102,1.285,5.101,4.104\
      C80.159,154.799,77.874,156.083,75.056,156.082z`
  },
  "light-snow": {
    name: locale.LIGHT_SNOW, //"小雪"
    size: [22, 16],
    path: `M152.318,137.785H34.385c-17.113,0-31.033-13.924-31.033-31.033c0-17.036,13.794-30.903,30.799-31.033\
      c2.394-29.864,27.237-53.202,57.426-53.202c20.435,0,39.057,10.673,49.448,28.09c3.684-0.985,7.479-1.486,11.293-1.489\
      c24.439,0,44.328,19.888,44.328,44.333C196.646,117.893,176.76,137.785,152.318,137.785z M34.385,84.583\
      c-12.223,0-22.169,9.946-22.169,22.169c0,12.223,9.946,22.169,22.169,22.169h117.934c19.556,0,35.466-15.911,35.466-35.469\
      c0-19.559-15.91-35.469-35.466-35.469c-4.021,0-8.032,0.71-11.92,2.104l-3.662,1.315l-1.777-3.462\
      c-8.41-16.382-25.029-26.557-43.381-26.557c-26.891,0-48.77,21.878-48.77,48.77v5.137l-5.064-0.42\
      C36.64,84.704,35.532,84.583,34.385,84.583z\
      M86.653,171.049H65.465c-1.881,0-3.366-1.484-3.366-3.365c0-1.883,1.485-3.367,3.366-3.367h21.188\
      c1.881,0,3.367,1.484,3.367,3.367C90.02,169.564,88.535,171.049,86.653,171.049L86.653,171.049z\
      M81.406,180.257c-1.188,0-2.277-0.595-2.97-1.683l-10.594-18.416c-0.891-1.584-0.396-3.664,1.287-4.654\
      c1.584-0.891,3.663-0.396,4.653,1.287l10.495,18.316c0.891,1.584,0.396,3.664-1.287,4.654\
      C82.495,180.059,81.901,180.257,81.406,180.257L81.406,180.257z\
      M70.713,180.257c-0.594,0-1.188-0.099-1.683-0.495c-1.584-0.891-2.178-2.971-1.287-4.652l10.594-18.416\
      c0.891-1.584,2.971-2.18,4.654-1.287c1.584,0.892,2.178,2.97,1.287,4.652l-10.594,18.416\
      C73.089,179.662,71.901,180.257,70.713,180.257L70.713,180.257z\
      M132.078,171.049h-21.188c-1.882,0-3.365-1.484-3.365-3.365c0-1.883,1.483-3.367,3.365-3.367h21.188\
      c1.883,0,3.367,1.484,3.367,3.367C135.445,169.564,133.861,171.049,132.078,171.049L132.078,171.049z\
      M126.732,180.257c-1.188,0-2.277-0.595-2.971-1.683l-10.595-18.416c-0.892-1.584-0.396-3.664,1.287-4.654\
      c1.584-0.891,3.664-0.396,4.653,1.287l10.595,18.416c0.891,1.584,0.396,3.664-1.287,4.654\
      C127.92,180.059,127.326,180.257,126.732,180.257L126.732,180.257z\
      M116.139,180.257c-0.594,0-1.188-0.099-1.684-0.495c-1.584-0.891-2.178-2.971-1.287-4.652l10.594-18.416\
      c0.891-1.584,2.971-2.18,4.654-1.287c1.584,0.892,2.178,2.97,1.287,4.652l-10.693,18.517\
      C118.416,179.662,117.326,180.257,116.139,180.257L116.139,180.257z`
  },
  "showers-hail": {
    name: locale.SHOWERS_HAIL, //"阵雨伴冰雹"
    size: [22, 16],
    path: `M43.913,147.693l-12.82,12.619c-1.629,1.603-1.63,4.199-0.002,5.805c0.783,0.771,1.846,1.205,2.954,1.203\
      c1.067,0,2.135-0.4,2.95-1.202l12.82-12.616c1.63-1.604,1.63-4.202,0.001-5.807c0,0-0.001,0-0.001-0.002\
      c-1.629-1.603-4.271-1.603-5.9,0C43.914,147.693,43.914,147.693,43.913,147.693z M155.322,147.693c-1.629-1.603-4.271-1.603-5.9,0\
      c0,0,0,0-0.001,0L136.6,160.313c-1.629,1.604-1.629,4.201-0.002,5.806c0.782,0.771,1.846,1.204,2.953,1.202\
      c1.068,0,2.135-0.399,2.951-1.201l12.82-12.616c1.63-1.604,1.631-4.2,0.002-5.806C155.324,147.695,155.322,147.695,155.322,147.693\
      z M148.581,130.539H37.539c-16.115,0-29.221-12.896-29.221-28.753c0-15.78,12.983-28.633,29.001-28.753\
      c2.25-27.671,25.642-49.294,54.071-49.294c19.236,0,36.774,9.889,46.555,26.03c3.47-0.916,7.045-1.38,10.636-1.383\
      c23.007,0,41.737,18.43,41.737,41.081C190.318,112.115,171.59,130.539,148.581,130.539L148.581,130.539z M37.539,81.246\
      c-11.511,0-20.875,9.216-20.875,20.541c0,11.33,9.364,20.54,20.875,20.54h111.042c18.412,0,33.392-14.742,33.392-32.86\
      c0-18.122-14.979-32.868-33.392-32.868c-3.788,0-7.563,0.658-11.222,1.949l-3.449,1.219l-1.678-3.208\
      c-7.914-15.175-23.563-24.607-40.843-24.607c-25.324,0-45.92,20.276-45.92,45.188v4.764l-4.768-0.393\
      C39.659,81.359,38.616,81.246,37.539,81.246z\
      M68.818,158.029c-0.003,3.348,2.708,6.064,6.055,6.066s6.063-2.709,6.067-6.056c0-0.003,0-0.007,0-0.011\
      c0-3.348-2.715-6.061-6.062-6.061C71.531,151.971,68.818,154.684,68.818,158.029L68.818,158.029z\
      M104.242,158.029c0,3.348,2.713,6.062,6.061,6.062s6.061-2.714,6.061-6.062s-2.713-6.061-6.061-6.061\
      S104.242,154.684,104.242,158.029L104.242,158.029z`
  },
  "moderate-rain": {
    name: locale.MODERATE_RAIN,   //"中雨"
    size: 22,
    path: `M61.047,162.275l-13.76,13.76c-1.749,1.746-1.75,4.58-0.003,6.33c0.001,0,0.002,0.002,0.003,0.003\
      c0.875,0.876,2.021,1.313,3.166,1.313s2.293-0.438,3.166-1.313l13.762-13.761c1.722-1.775,1.678-4.611-0.099-6.334\
      C65.545,160.59,62.784,160.59,61.047,162.275L61.047,162.275z M115.438,162.275l-13.765,13.76c-1.749,1.746-1.75,4.58-0.003,6.33\
      c0.001,0,0.002,0.002,0.003,0.003c1.747,1.75,4.583,1.753,6.333,0.005c0.002-0.002,0.004-0.004,0.006-0.005l13.76-13.761\
      c1.722-1.775,1.678-4.611-0.1-6.334C119.936,160.59,117.174,160.591,115.438,162.275L115.438,162.275z\
      M49.716,131.175c-1.747-1.747-4.58-1.749-6.329-0.003c0,0.002-0.001,0.002-0.002,0.003l-13.763,13.763\
      c-1.744,1.75-1.744,4.582,0,6.332c0.839,0.842,1.979,1.314,3.168,1.313c1.188,0.003,2.329-0.47,3.166-1.313l13.76-13.76\
      c1.749-1.744,1.753-4.576,0.01-6.324C49.723,131.182,49.719,131.178,49.716,131.175z M104.107,131.175\
      c-1.75-1.749-4.585-1.749-6.334,0l-13.76,13.763c-1.749,1.744-1.753,4.576-0.009,6.324c0.003,0.002,0.006,0.006,0.009,0.008\
      c0.872,0.877,2.021,1.313,3.166,1.313s2.291-0.437,3.166-1.313l13.762-13.76C105.855,135.76,105.855,132.924,104.107,131.175z\
      M158.491,131.175c-1.749-1.749-4.583-1.749-6.331-0.001c-0.001,0.001-0.001,0.001-0.001,0.001l-13.763,13.763\
      c-1.748,1.752-1.746,4.588,0.006,6.336c0.84,0.838,1.977,1.31,3.162,1.311c1.188,0.001,2.328-0.473,3.166-1.313l13.761-13.76\
      c1.749-1.746,1.752-4.578,0.007-6.328C158.496,131.18,158.493,131.178,158.491,131.175z\
      M153.729,124.068H34.544c-17.297,0-31.363-14.066-31.363-31.36c0-17.217,13.938-31.24,31.129-31.362\
      C36.727,31.156,61.832,7.58,92.343,7.58c20.654,0,39.472,10.788,49.968,28.389c3.726-0.996,7.564-1.502,11.42-1.506\
      c24.69,0,44.795,20.094,44.795,44.807C198.525,103.967,178.421,124.068,153.729,124.068z M34.544,70.304\
      c-12.352,0-22.406,10.051-22.406,22.404c0,12.351,10.055,22.403,22.406,22.403H153.73c19.754,0,35.836-16.082,35.836-35.842\
      c0-19.77-16.082-35.848-35.836-35.848c-4.067,0-8.119,0.708-12.045,2.124l-3.703,1.322l-1.801-3.49\
      c-8.498-16.56-25.291-26.839-43.84-26.839c-27.179,0-49.284,22.106-49.284,49.286v5.205l-5.138-0.438\
      C36.611,70.39,35.542,70.304,34.544,70.304L34.544,70.304z`
  },
  "night-cloudy": {
    name: locale.NIGHT_CLOUDY, //"夜间多云"
    size: [22, 16],
    path: `M159.936,67.041 163.977,55.556 170.686,53.654 163.977,50.916 159.936,40.343 155.895,50.916\
      149.186,53.654 155.895,55.556 159.936,67.041\
      M180.824,82.634 183.109,75.864 187,74.723 183.109,73.049 180.824,66.736 178.536,73.049\
      174.648,74.723 178.536,75.864 180.824,82.634\
      M173.305,90.394c-20.51,0-37.13-16.583-37.13-37.043c0-5.249,1.067-10.269,3.05-14.756\
      c-0.763,0-1.523,0.228-2.287,0.228c0-0.076,0-0.076,0.076-0.152c-1.144,0.076-2.287,0.38-3.431,0.532\
      c-0.84,0.152-1.754,0.152-2.592,0.304v0.076c-17.46,3.651-31.487,16.583-36.442,33.544c2.287,1.141,4.498,2.434,6.633,3.956\
      c3.432-14.148,14.18-25.33,28.133-29.437c-0.229,1.901-0.457,3.727-0.457,5.705c0,24.492,19.896,44.42,44.522,44.42\
      c2.363,0,4.649-0.229,6.938-0.608c-3.965,14.909-16.086,26.394-31.411,29.437c0.763,2.28,1.372,4.715,1.755,7.148\
      c19.212-3.954,34.076-19.318,37.584-38.563h0.077c0.151-1.065,0.151-2.207,0.305-3.271c0.151-1.141,0.381-2.206,0.381-3.346h-0.075\
      c0-0.609,0.151-1.141,0.151-1.674C184.281,89.175,178.945,90.394,173.305,90.394L173.305,90.394z\
      M114.63,153.229H33.203c-11.817,0-21.428-9.459-21.428-21.085c0-11.571,9.521-20.998,21.267-21.085\
      c1.65-20.293,18.804-36.148,39.651-36.148c14.106,0,26.967,7.252,34.139,19.089c2.545-0.673,5.167-1.013,7.799-1.013\
      c16.873,0,30.606,13.512,30.606,30.124C145.236,139.719,131.503,153.229,114.63,153.229L114.63,153.229z M33.203,117.08\
      c-8.441,0-15.308,6.758-15.308,15.063c0,8.309,6.866,15.063,15.308,15.063h81.427c13.502,0,24.487-10.812,24.487-24.098\
      c0-13.288-10.985-24.102-24.487-24.102c-2.776,0-5.545,0.482-8.228,1.43l-2.529,0.894l-1.23-2.353\
      c-5.804-11.128-17.28-18.046-29.951-18.046c-18.571,0-33.673,14.87-33.673,33.138v3.492l-3.497-0.287\
      C34.757,117.165,33.993,117.08,33.203,117.08z`
  },
  "night-rain": {
    name: locale.NIGHT_RAIN, //"夜间阵雨"
    size: [20, 22],
    path: `M137.623,129.926H49.807c-9.089,0-16.507-7.48-16.507-16.645c0-9.165,7.418-16.644,16.507-16.644\
      c0.869,0,1.672,0.068,2.472,0.201l3.743,0.337v-3.84c0-20.149,16.306-36.591,36.289-36.591c13.634,0,26.064,7.614,32.279,19.945\
      l1.339,2.628l2.74-1.011c2.871-1.078,5.88-1.55,8.889-1.55c14.566,0,26.396,11.927,26.396,26.616\
      C164.021,117.931,152.191,129.926,137.623,129.926 M101.065,48.995c0-11.792,6.283-22.507,16.174-28.302\
      c-0.266,1.954-0.467,3.909-0.467,5.93c0,21.699,17.508,39.353,39.028,39.353c1.871,0,3.742-0.134,5.612-0.404\
      c-1.936,3.37-4.544,6.334-7.55,8.828c-4.813-2.762-10.358-4.38-16.306-4.38c-2.807,0-5.616,0.404-8.422,1.146\
      c-6.215-10.512-16.373-17.655-28.002-20.081C101.134,50.343,101.065,49.668,101.065,48.995 M159.41,78.375\
      c5.012-4.448,8.755-10.108,10.959-16.577c0.401-1.213,0.136-2.561-0.801-3.437c-0.87-0.875-2.206-1.213-3.411-0.809\
      c-3.406,1.146-6.883,1.753-10.426,1.753c-17.907,0-32.477-14.69-32.477-32.75c0-3.572,0.602-7.211,1.804-10.646\
      c0.4-1.214,0.133-2.562-0.804-3.438c-0.868-0.876-2.206-1.213-3.409-0.809c-15.839,5.458-26.531,20.418-26.531,37.264\
      c0,0.406,0.065,0.809,0.065,1.213c-0.735,0-1.404-0.134-2.138-0.134c-22.523,0-41.102,17.654-42.772,39.959\
      c-12.628,0.136-22.92,10.513-22.92,23.316c0,12.87,10.358,23.313,23.124,23.313h87.75c18.178,0,33.014-14.891,33.014-33.287\
      C170.638,93.401,166.293,84.507,159.41,78.375\
      M65.713,173.59l-10.158,10.242c-1.27,1.282-1.27,3.436,0,4.718c0.668,0.674,1.471,0.943,2.339,0.943\
      s1.671-0.339,2.339-0.943l10.159-10.244c1.268-1.277,1.268-3.366,0-4.716C69.121,172.31,67.049,172.31,65.713,173.59\
      M59.631,150.208c-1.27-1.281-3.341-1.281-4.678,0l-10.158,10.243c-1.27,1.28-1.27,3.435,0,4.715\
      c0.667,0.675,1.47,0.943,2.339,0.943s1.671-0.335,2.339-0.943l10.158-10.243C60.901,153.578,60.901,151.488,59.631,150.208\
      M105.812,173.59l-10.158,10.242c-1.271,1.282-1.271,3.436,0,4.718c0.668,0.674,1.47,0.943,2.339,0.943\
      s1.671-0.339,2.339-0.943l10.16-10.244c1.268-1.277,1.268-3.366,0-4.716C109.152,172.31,107.082,172.31,105.812,173.59\
      M99.663,150.208c-1.27-1.281-3.408-1.281-4.678,0l-10.158,10.243c-1.27,1.28-1.27,3.435,0,4.715\
      c0.668,0.675,1.471,0.943,2.339,0.943c0.868,0,1.671-0.335,2.338-0.943l10.157-10.243\
      C100.933,153.578,100.933,151.488,99.663,150.208\
      M135.085,150.208l-10.159,10.243c-1.27,1.28-1.27,3.435,0,4.715c0.669,0.675,1.471,0.943,2.339,0.943\
      s1.67-0.335,2.337-0.943l10.16-10.243c1.271-1.278,1.271-3.368,0-4.715C138.426,148.927,136.353,148.927,135.085,150.208`
  },
  shower: {
    name: locale.SHOWER, //"阵雨"
    size: [22, 16],
    path: `M137.201,77.386c-2.406,0-4.357-1.957-4.357-4.371c0-23.712-19.232-43.003-42.875-43.003\
      c-23.641,0-42.875,19.291-42.875,43.003c0.001,2.414-1.949,4.371-4.355,4.372c-2.407,0.001-4.359-1.955-4.36-4.369\
      c0-0.001,0-0.002,0-0.003c0-28.532,23.144-51.745,51.591-51.745c28.447,0,51.59,23.212,51.59,51.745\
      C141.561,75.429,139.607,77.386,137.201,77.386z\
      M157.598,141.041H41.78c-19.901,0-36.091-16.238-36.091-36.199c0-19.959,16.19-36.198,36.091-36.198\
      c2.407,0,4.358,1.957,4.358,4.371s-1.951,4.371-4.358,4.371l0,0c-15.095,0-27.375,12.317-27.375,27.458S26.686,132.3,41.78,132.3\
      h115.818c15.094,0,27.377-12.315,27.377-27.456c0-15.14-12.283-27.458-27.377-27.458c-2.406,0-4.357-1.957-4.357-4.371\
      s1.951-4.371,4.357-4.371c19.899,0,36.092,16.239,36.092,36.198C193.688,124.803,177.497,141.041,157.598,141.041L157.598,141.041z\
      M157.598,77.386h-20.887c-2.406,0-4.357-1.957-4.357-4.371s1.951-4.371,4.357-4.371h20.887\
      c2.406,0,4.357,1.957,4.357,4.371S160.004,77.386,157.598,77.386z\
      M36.35,179.044c-2.406,0.002-4.359-1.954-4.36-4.368c-0.001-1.352,0.622-2.628,1.688-3.457l27.719-21.557\
      c1.885-1.502,4.626-1.188,6.123,0.701c1.498,1.891,1.184,4.641-0.7,6.143c-0.027,0.021-0.055,0.043-0.082,0.064l-27.719,21.557\
      C38.255,178.723,37.316,179.045,36.35,179.044z\
      M76.815,179.044c-2.407,0.002-4.359-1.954-4.361-4.368c-0.001-1.352,0.622-2.628,1.688-3.457l27.717-21.557\
      c1.887-1.502,4.627-1.188,6.125,0.701c1.496,1.891,1.184,4.641-0.7,6.143c-0.027,0.021-0.056,0.043-0.083,0.064l-27.719,21.557\
      C78.72,178.723,77.781,179.045,76.815,179.044z\
      M117.279,179.044c-2.404,0.002-4.357-1.954-4.359-4.368c0-1.352,0.623-2.628,1.688-3.457l27.719-21.557\
      c1.886-1.502,4.625-1.188,6.123,0.701c1.496,1.891,1.184,4.641-0.699,6.143c-0.027,0.021-0.055,0.043-0.084,0.064l-27.719,21.557\
      C119.188,178.723,118.248,179.045,117.279,179.044z`
  },
  "clear-night": {
    name: locale.CLEAR_NIGHT, //"夜间晴朗"
    size: [18, 20],
    path: `M178.529,73.138c-3.647-11.215-9.334-21.457-16.901-30.44c-7.836-9.304-17.353-16.841-28.282-22.401\
      c-10.861-5.54-22.495-8.793-34.579-9.668L90.086,10l5.615,6.638c21.622,25.562,11.845,69.914,2.661,92.09\
      c-11.403,27.534-37.767,45.325-67.166,45.325c-1.822,0-3.675-0.068-5.506-0.203l-8.69-0.64l5.621,6.648\
      c7.822,9.251,17.291,16.728,28.136,22.216C63.686,188.661,77.554,192,91.974,192c16.518,0,32.749-4.493,46.938-12.994\
      c14.59-8.74,26.4-21.396,34.157-36.595c5.572-10.918,8.835-22.601,9.699-34.726C183.604,95.976,182.177,84.352,178.529,73.138\
      L178.529,73.138z M166.539,139.089c-14.352,28.123-42.923,45.593-74.565,45.593c-13.252,0-25.999-3.069-37.896-9.13\
      c-7.428-3.759-14.15-8.528-20.066-14.229c15.075-0.522,29.527-5.244,41.957-13.732c12.98-8.864,23.066-21.334,29.167-36.064\
      c6.359-15.354,10.323-33.231,10.875-49.047c0.34-9.722-0.565-18.734-2.689-26.788c-1.624-6.16-3.97-11.775-7-16.779\
      c8.214,1.412,16.154,4.059,23.692,7.904c19.892,10.118,34.646,27.372,41.545,48.583\
      C178.458,96.607,176.676,119.227,166.539,139.089z\
      M79.804,64.864l-5.649,33.794l-5.648-33.794l-22.573-5.64l22.573-5.64l5.648-16.897l5.649,16.897\
      l22.573,5.64L79.804,64.864z M46.33,100.512l-3.063,18.321l-3.063-18.321l-12.238-3.059l12.238-3.057l3.063-9.161l3.063,9.161\
      l12.238,3.057L46.33,100.512z`
  }
};

const extraSkyMaps = {
  "partly-cloudy-night": "overcast",
  "partly-cloudy-day": "cloudy",
  "rain": "light-rain",
  "clear-day": "sunny"
};

const getXaisData = (times, formatType) => {
  return times.map((time) => {
    return formatTime(time, formatType) + UNIT_MAP[formatType];
  });
};

const getYmax = (values) => {
  let max = Math.ceil(Math.max.apply(Math, values)*1.5);
  return max === 0 ? 1 : max + (10 - max%10);
};

function makeChartData(data, weatherData, filterType) {
  let series = [];

  let traffic = data.axisY.traffic;
  let times = data.axisX.time;
  let yTrafficMax = getYmax(traffic);

  let xAxis = [
    {
      type: 'category',
      data: getXaisData(times, filterType)
    }
  ];

  let splitStyle = {
    lineStyle: {
      color: ["#ddd"],
      type: 'dashed'
    }
  };

  series[0] = {
    name: locale.traffic,
    smooth: true,
    color: ["#4db7cd"],
    type: 'bar',
    barCategoryGap: '50%',
    yAxisIndex: 0,
    data: traffic
  };

  series[1] = {
    name: locale.temperature,
    smooth: true,
    color: ["#ffdb73"],
    type: 'line',
    yAxisIndex: 1,
    data: []
  };

  series[2] = {
    name: locale.weather,
    color: ["#008cee"],
    type: 'scatter',
    //symbolSize: [22, 16],
    data: []
  };

  let tempMap = (weatherData.series[0]||{}).params || {};
  let iconMap = (weatherData.series[1]||{}).params || {};
  let symbolCoordY = Math.max(0.9, yTrafficMax - yTrafficMax/10);

  let isLargeSeries = times.length > 8;

  /**
   * 生成x轴坐标点对应的温度和天气
   */
  times.forEach((time, i) => {
    let skyItem = skyIconsMap[iconMap[time]];
    if( !skyItem ){
      skyItem = skyIconsMap[extraSkyMaps[iconMap[time]]] || {};
    }
    series[1].data[i] = tempMap[time] || 0;
    series[2].data[i] = {
      name: skyItem.name || "-",
      key: iconMap[time],
      value: symbolCoordY,
      symbolSize: skyItem.size,
      symbol: "path://" + (isLargeSeries ? ( i%2 === 0 ? skyItem.path : undefined ) : skyItem.path)
    };
  });

  return {
    tooltip: {
      trigger: 'axis',
      confine: true,  //http://echarts.baidu.com/option.html#tooltip.confine
      formatter: function(params){
        let tip = params[0].axisValue;
        params.forEach((param, i) => {
          tip += ("<br />" + param.marker + param.seriesName + ": " + (typeof param.data === "object" ? param.data.name/* + "<br />" + param.data.key*/ : param.data) + (i === 1 ? "℃" : ""));
        });
        return tip;
      }
    },
    series: series,
    grid: {
      left: '3%',
      right: '3%',
      bottom: '3%',
      containLabel: true
    },
    xAxis: xAxis,
    legend: {
      left: "center",
      data: [locale.traffic, locale.temperature]
    },
    yAxis: [
      {
        type: 'value',
        name: locale.traffic,
        max: yTrafficMax,
        splitLine: splitStyle
      },
      {
        type: 'value',
        name: locale.temperature,
        splitLine: splitStyle,
        max: 45, //getYmax(series[1].data),
        //scale: true,
        axisLabel: {
          formatter: '{value}℃'
        }
      }
    ]
  };
}

class PassFlowWeatherCharts extends BaseChart {

  static defaultProps = {
    responsive: false
  };

  static propTypes = {
    responsive: React.PropTypes.bool // eslint-disable-line
  };

  constructor(props) {
    super(props);
    this.chartProps = {
      height: 350,
      responsive: this.props.responsive,
      title: locale.passflowWeather
    };
  }

  /**
   * 获取订单量和进店人数
   */
  getOrderAndCount(){
    let {store, offset, filterType} = this.state;
    return new Promise((resolve, reject) => {
      getReportPayment(store.storeId, offset, `retail.payment.report.${filterType}`).then(
        res => resolve(res.data),
        err => reject(err)
      );
    });
  }

  /**
   * 获取天气相关的数据
   */
  getWeather() {
    let {store, offset, filterType} = this.state;
    return new Promise((resolve, reject) => {
      if( filterType === 'hour' || filterType === 'day' ) {
        getStoreChartReport(store.storeId, offset, `retail.weather.${filterType}`).then(
          res => resolve(res),
          err => reject(err)
        );
      } else {
        resolve({
          series: []
        });
      }
    });
  }

  /**
   * @override
   */
  fetch() {
    let { filterType } = this.state;
    Promise.all([this.getOrderAndCount(), this.getWeather()]).then(values => {
      let orderData = values[0];
      let weatherData = values[1];

      let chartData = makeChartData(orderData, weatherData, filterType);

      this.setState({
        loaded: true,
        data: chartData
      });

      this.refs.charts.refresh();
    });
  }

}

module.exports = PassFlowWeatherCharts;
